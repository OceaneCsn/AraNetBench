---
title: "Using-AraNetBench"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using-AraNetBench}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(AraNetBench)
```

# Loading an example network

```{r}
data("abiotic_stress_Heat_genes_net")
head(abiotic_stress_Heat_genes_net)
```

As it is an output from DIANE, some nodes are made of several genes.
We are going to "flatten" this dataframe, so that each interaction links only one gene to one gene.

If each node is made of one gene, just skip this step.

```{r}
net <- flatten_edges(abiotic_stress_Heat_genes_net)
head(net)
```


# Overview of validation data

```{r}
data("validated_edges")
table(validated_edges$type)
```


# Validating a network


```{r}
results <- evaluate_network(abiotic_stress_Heat_genes_net)
results[c("tp", "fp", "tpr", "fpr")]
head(results$edges, n = 20)



results <- evaluate_network(net)
results[c("tp", "fp", "tpr", "fpr")]
head(results$edges, n = 20)
```



# Drawing hte result of a network evaluation


```{r}
# 
# 
# biggest_component_only = FALSE
# graph <- igraph::graph_from_data_frame(results$edges)
# if(biggest_component_only){
#   # removes from the plot the small isolated components of the graph
#   components <- igraph::clusters(graph, mode="weak")
#   biggest_cluster_id <- which.max(components$csize)
#   vert_ids <- V(graph)[components$membership == biggest_cluster_id]
#   graph <- igraph::induced_subgraph(graph, vert_ids)
# }
# 
# 
# layout <- ggraph::create_layout(graph, layout = "stress")
# 
# 
# edges <- results$edges
# grouped_net <- abiotic_stress_Heat_genes_net

```


